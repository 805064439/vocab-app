<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JLPT N1 è¯æ±‡æŒ‘æˆ˜</title>
    <!-- åŠ è½½ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ä½¿ç”¨ Inter å­—ä½“ä»¥è·å¾—ç°ä»£æ„Ÿ */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fb; /* æµ…ç°è‰²èƒŒæ™¯ */
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'accent-blue': '#3b82f6',
                        'accent-dark': '#1e293b',
                    }
                }
            }
        }
    </script>
</head>
<body class="min-h-screen p-4 sm:p-8">

    <div id="app" class="max-w-4xl mx-auto">
        <!-- å¤´éƒ¨åŒºåŸŸ -->
        <header class="text-center mb-10">
            <h1 class="text-4xl font-extrabold text-accent-dark mb-2">
                JLPT N1 è¯æ±‡æŒ‘æˆ˜
            </h1>
            <p class="text-lg text-gray-500">
                æ¯æ¬¡ç‚¹å‡»è·å– 10 ä¸ª N1 çº§åˆ«æ ¸å¿ƒè¯æ±‡ã€‚
            </p>
        </header>

        <!-- æŒ‰é’®å’ŒçŠ¶æ€åŒºåŸŸ -->
        <div class="flex flex-col items-center mb-8 space-y-4">
            <button id="fetchButton"
                    class="px-8 py-3 bg-accent-blue text-white font-semibold rounded-xl shadow-lg hover:bg-blue-600 transition duration-300 transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-accent-blue/50 disabled:bg-gray-400">
                âœ¨ è·å–æ–°è¯æ±‡
            </button>
            <div id="statusMessage" class="text-sm text-gray-600"></div>
        </div>

        <!-- è¯æ±‡å¡ç‰‡å®¹å™¨ -->
        <div id="vocabularyContainer" class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- è¯æ±‡å¡ç‰‡å°†åœ¨è¿™é‡ŒåŠ¨æ€åŠ è½½ -->
            <div class="md:col-span-2 text-center text-gray-400 p-12 bg-white rounded-xl shadow-inner">
                ç‚¹å‡» "è·å–æ–°è¯æ±‡" æŒ‰é’®æ¥å¼€å§‹å­¦ä¹ å§ï¼
            </div>
        </div>
    </div>

    <!-- JavaScript é€»è¾‘ -->
    <script>
        // âš ï¸ å¿…å¡«ï¼šè¯·å°†æ­¤å¤„çš„ URL æ›¿æ¢ä¸ºæ‚¨çœŸå®çš„ Vercel åŸŸåï¼
        const API_URL = "https://vocab-api-server-on-vercel.vercel.app/api/n1-vocab";

        const fetchButton = document.getElementById('fetchButton');
        const statusMessage = document.getElementById('statusMessage');
        const vocabularyContainer = document.getElementById('vocabularyContainer');

        /**
         * æ˜¾ç¤ºçŠ¶æ€ä¿¡æ¯å¹¶å¯ç”¨/ç¦ç”¨æŒ‰é’®
         * @param {string} message - è¦æ˜¾ç¤ºçš„æ¶ˆæ¯
         * @param {boolean} isLoading - æ˜¯å¦æ­£åœ¨åŠ è½½
         */
        function setStatus(message, isLoading) {
            statusMessage.textContent = message;
            fetchButton.disabled = isLoading;
            fetchButton.textContent = isLoading ? 'ğŸš€ æ­£åœ¨ç”Ÿæˆä¸­...' : 'âœ¨ è·å–æ–°è¯æ±‡';
        }

        /**
         * åˆ›å»ºå•ä¸ªè¯æ±‡å¡ç‰‡
         * @param {object} vocab - åŒ…å«è¯æ±‡ä¿¡æ¯çš„å¯¹è±¡
         * @returns {string} HTML å­—ç¬¦ä¸²
         */
        function createCard(vocab) {
            return `
                <div class="bg-white p-6 rounded-xl shadow-xl hover:shadow-2xl transition duration-300 border border-gray-100">
                    <!-- è¯æ±‡ä¸»ä½“ -->
                    <div class="flex justify-between items-start mb-3 border-b pb-2 border-dashed">
                        <h3 class="text-3xl font-bold text-accent-dark tracking-wide">${vocab.word}</h3>
                        <span class="text-lg text-gray-500 font-medium ml-4">${vocab.reading}</span>
                    </div>

                    <!-- ä¸­æ–‡ç¿»è¯‘ -->
                    <p class="text-lg text-gray-700 font-semibold mb-4">
                        <span class="text-accent-blue mr-2">è¯‘:</span> ${vocab.chinese_translation}
                    </p>

                    <!-- ä¾‹å¥ -->
                    <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                        <p class="text-base italic text-gray-800 mb-2">
                            ${vocab.example_sentence_jp}
                        </p>
                        <p class="text-sm text-gray-500">
                            ${vocab.example_sentence_cn}
                        </p>
                    </div>
                </div>
            `;
        }

        /**
         * ä» Vercel API è·å–è¯æ±‡æ•°æ®å¹¶æ¸²æŸ“
         */
        async function fetchVocabulary() {
            setStatus('', true);
            vocabularyContainer.innerHTML = ''; 

            try {
                setStatus('æ­£åœ¨è¯·æ±‚ Gemini API...', true);
                
                const response = await fetch(API_URL);
                if (!response.ok) {
                    throw new Error(`HTTP é”™è¯¯ï¼çŠ¶æ€ç : ${response.status}`);
                }
                
                const data = await response.json();
                
                if (!data.n1_vocabulary_list || data.n1_vocabulary_list.length === 0) {
                     vocabularyContainer.innerHTML = `<div class="md:col-span-2 text-center text-red-500 p-12 bg-white rounded-xl shadow-inner">API è¿”å›çš„æ•°æ®æ ¼å¼æœ‰è¯¯æˆ–åˆ—è¡¨ä¸ºç©ºã€‚</div>`;
                     setStatus('è·å–å¤±è´¥', false);
                     return;
                }

                setStatus(`æˆåŠŸè·å– ${data.n1_vocabulary_list.length} ä¸ªè¯æ±‡ã€‚`, false);
                
                // æ¸²æŸ“å¡ç‰‡
                let cardsHtml = data.n1_vocabulary_list.map(createCard).join('');
                vocabularyContainer.innerHTML = cardsHtml;

            } catch (error) {
                console.error("Fetch Error:", error);
                setStatus('è·å–è¯æ±‡å¤±è´¥ï¼Œè¯·æ£€æŸ¥ API å¯†é’¥å’Œ CORS è®¾ç½®ã€‚', false);
                vocabularyContainer.innerHTML = `<div class="md:col-span-2 text-center text-red-500 p-12 bg-white rounded-xl shadow-inner">
                    é”™è¯¯: æ— æ³•è¿æ¥æˆ–è·å–æ•°æ®ã€‚è¯·ç¡®è®¤ Vercel åŸŸåæ˜¯å¦æ­£ç¡®ï¼Œå¹¶æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°äº†è§£è¯¦æƒ…ã€‚
                </div>`;
            }
        }

        // ç»‘å®šäº‹ä»¶ç›‘å¬å™¨
        fetchButton.addEventListener('click', fetchVocabulary);
        
        // é¡µé¢åŠ è½½å®Œæˆåï¼Œæ˜¾ç¤ºæç¤ºä¿¡æ¯
        window.onload = () => {
             setStatus('ç‚¹å‡»æŒ‰é’®å¼€å§‹ã€‚', false);
        };
    </script>
</body>
</html>
